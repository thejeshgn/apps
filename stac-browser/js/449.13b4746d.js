"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[449],{90449:function(t,e,s){s.r(e),s.d(e,{default:function(){return j}});var r=function(){var t=this,e=t._self._c;return e("section",{staticClass:"assets mb-4"},[t.displayTitle?e("h2",[t._v(t._s(t.displayTitle))]):t._e(),e("div",{staticClass:"accordion",attrs:{role:"tablist"}},t._l(t.assets,(function(s,r){return e("Asset",{key:r,attrs:{asset:s,expand:t.expand,context:t.context,definition:t.definition,shown:t.shown.includes(r),id:r},on:{show:t.show}})})),1)])},a=[],i=function(){var t=this,e=t._self._c;return e("b-card",{staticClass:"asset expandable-card",attrs:{"no-body":""}},[e("b-card-header",{attrs:{"header-tag":"header",role:"tab"}},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.uid,expression:"uid"}],attrs:{block:"",variant:"asset",squared:""}},[e("span",{staticClass:"chevron",attrs:{"aria-hidden":"true"}},[t.expanded?e("b-icon-chevron-down"):e("b-icon-chevron-right")],1),e("span",{staticClass:"title"},[t._v(t._s(t.asset.title||t.id))]),Array.isArray(t.asset.roles)?e("div",{staticClass:"badges ml-1"},[t.shown?e("b-badge",{staticClass:"shown",attrs:{variant:"success",title:t.$t("assets.currentlyShown")}},[e("b-icon-check"),t._v(" "+t._s(t.$t("assets.shown"))+" ")],1):t._e(),t.asset.deprecated?e("b-badge",{staticClass:"deprecated",attrs:{variant:"warning"}},[t._v(t._s(t.$t("deprecated")))]):t._e(),t._l(t.asset.roles,(function(s){return e("b-badge",{key:s,staticClass:"role",attrs:{variant:"data"===s?"primary":"secondary"}},[t._v(t._s(t.displayRole(s)))])})),t.shortFileFormat?e("b-badge",{staticClass:"format",attrs:{variant:"dark",title:t.fileFormat}},[e("span",{domProps:{innerHTML:t._s(t.shortFileFormat)}})]):t._e()],2):t._e()])],1),e("b-collapse",{attrs:{id:t.uid,accordion:t.type,role:"tabpanel"},on:{input:t.collapseToggled},model:{value:t.expanded,callback:function(e){t.expanded=e},expression:"expanded"}},[t.hasAlternatives?[e("b-tabs",{attrs:{card:""}},[e("b-tab",{attrs:{title:t.asset.name||t.$t("assets.alternate.main"),active:""}},[e("AssetAlternative",{attrs:{asset:t.asset,context:t.context,shown:t.shown,hasAlternatives:""}})],1),t._l(t.alternatives,(function(s,r){return e("b-tab",{key:r,attrs:{title:s.name||r}},[e("AssetAlternative",{key:r,attrs:{asset:s,context:t.context,shown:t.shown,hasAlternatives:""}})],1)}))],2)]:e("AssetAlternative",{attrs:{asset:t.asset,context:t.context}})],2)],1)},n=[],o=s(48883),l=s(82948),c=s(95050),h=s(63405),p=s(50735),d=s(95353),u=function(){var t=this,e=t._self._c;return e(t.component,{tag:"component"},[e("b-card-title",[e("span",{domProps:{innerHTML:t._s(t.fileFormat)}})]),e("HrefActions",{attrs:{isAsset:"",data:t.asset,shown:t.shown},on:{show:t.show}}),t.asset.description?e("b-card-text",{staticClass:"mt-4"},[e("Description",{attrs:{description:t.asset.description,compact:""}})],1):t._e(),e("Metadata",{staticClass:"mt-4",attrs:{data:t.asset,context:t.context,ignoreFields:t.ignore,title:"",type:"Asset"}})],1)},f=[],y=s(41526),m=s(53653),b=s(67467),w={name:"Asset",components:{Description:y["default"],HrefActions:m.A,Metadata:()=>Promise.all([s.e(537),s.e(4870),s.e(5428)]).then(s.bind(s,75428))},mixins:[(0,b.A)({formatMediaType:p.formatMediaType})],props:{asset:{type:Object,required:!0},context:{type:Object,default:null},hasAlternatives:{type:Boolean,default:!1},shown:{type:Boolean,default:!1}},data(){return{ignore:["href","title","description","type","roles","proj:bbox","proj:geometry","table:storage_options","xarray:open_kwargs","xarray:storage_options","alternate","name"]}},computed:{...(0,d.aH)(["buildTileUrlTemplate","useTileLayerAsFallback"]),component(){return this.hasAlternatives?"div":"b-card-body"},tileRendererType(){return this.buildTileUrlTemplate&&!this.useTileLayerAsFallback?"server":"client"},fileFormat(){return"string"===typeof this.asset.type&&this.asset.type.length>0?this.formatMediaType(this.asset.type):null}},methods:{show(){this.$emit("show",...arguments)}}},g=w,v=s(81656),x=(0,v.A)(g,u,f,!1,null,null,null),_=x.exports,A=s(2566),C={name:"Asset",components:{AssetAlternative:_,BCollapse:o.K,BIconCheck:l.GSz,BIconChevronDown:l.rc_,BIconChevronRight:l.f4q,BTabs:c.r,BTab:h.a},mixins:[(0,b.A)({formatMediaType:p.formatMediaType})],props:{asset:{type:Object,required:!0},id:{type:String,required:!0},context:{type:Object,default:null},definition:{type:Boolean,default:!1},expand:{type:Boolean,default:null},shown:{type:Boolean,default:!1}},data(){return{expanded:!1}},computed:{...(0,d.aH)(["stateQueryParameters"]),type(){return this.definition?"itemdef":"asset"},uid(){return`${this.type}-${this.id}`},fileFormat(){return"string"===typeof this.asset.type&&this.asset.type.length>0?this.formatMediaType(this.asset.type):null},shortFileFormat(){return"string"===typeof this.asset.type&&this.asset.type.length>0?this.formatMediaType(this.asset.type,null,{shorten:!0}):null},alternatives(){if(!A.Ay.isObject(this.asset.alternate))return{};const t=Object.assign({},this.asset);delete t.alternate;const e={};for(const s in this.asset.alternate)e[s]=Object.assign({},t,this.asset.alternate[s]);return e},hasAlternatives(){return A.Ay.size(this.alternatives)>0}},created(){this.stateQueryParameters[this.type].indexOf(this.uid)>-1?this.expanded=!0:"boolean"===typeof this.expand?this.expanded=this.expand:this.expanded=!1},methods:{displayRole(t){let e=`assets.role.${t}`;return this.$te(e)?this.$t(e):t},collapseToggled(t){let e=t?"openCollapsible":"closeCollapsible";this.$store.commit(e,{type:this.type,uid:this.uid})}}},T=C,B=(0,v.A)(T,i,n,!1,null,null,null),$=B.exports,k={name:"Assets",components:{Asset:$},props:{assets:{type:Object,required:!0},shown:{type:Array,default:()=>[]},context:{type:Object,default:null},definition:{type:Boolean,default:!1},title:{type:String,default:null}},computed:{count(){return A.Ay.size(this.assets)},displayTitle(){if(null===this.title){let t=this.definition?"assets.inItems":"stacAssets";return this.$tc(t,this.count)}return this.title},expand(){return!this.definition&&(!(1!==this.count||!this.stac||!this.stac.isItem())||null)}},methods:{show(t,e,s){this.$emit("showAsset",t,e,s)}}},O=k,P=(0,v.A)(O,r,a,!1,null,null,null),j=P.exports},53653:function(t,e,s){s.d(e,{A:function(){return A}});var r=function(){var t=this,e=t._self._c;return t.href?e("b-button-group",{staticClass:"actions",attrs:{vertical:t.vertical,size:t.size}},[t.isBrowserProtocol&&t.isAsset?e("b-button",{attrs:{href:t.href,target:"_blank",variant:"primary"}},[t.browserCanOpenFile?e("b-icon-box-arrow-up-right"):e("b-icon-download"),t._v(" "+t._s(t.buttonText)+" ")],1):t._e(),e("CopyButton",{attrs:{variant:"primary",copyText:t.href}},[t._v(" "+t._s(t.copyButtonText)+" ")]),t.isAsset&&t.canShow&&!t.shown?e("b-button",{attrs:{variant:"primary"},on:{click:t.show}},[e("b-icon-eye",{staticClass:"mr-1"}),t.isThumbnail?[t._v(t._s(t.$t("assets.showThumbnail")))]:[t._v(t._s(t.$t("assets.showOnMap")))]],2):t._e(),t._l(t.actions,(function(s){return e("b-button",t._b({key:s.id,attrs:{variant:"primary"},on:{click:s.onClick}},"b-button",s.btnOptions,!1),[s.icon?e(s.icon,{tag:"component",staticClass:"mr-1"}):t._e(),t._v(" "+t._s(s.text)+" ")],1)}))],2):t._e()},a=[],i=s(82948),n=s(41526),o=s(31831),l=s(2566),c=s(95353),h=s(84193),p=s.n(h);class d{constructor(t,e){this.id=t,this.component=e}get btnOptions(){let t;return this.uri instanceof p()?t=this.uri.toString():"string"===typeof this.uri&&(t=this.uri),t?{href:t,target:"_blank"}:{}}get onClick(){return()=>{}}get uri(){return null}get show(){return!1}get icon(){return i.hNP}}class u extends d{constructor(t,e,s){super(s,e),this.asset=t}}var f=s(48907);class y extends u{get show(){return this.component.isBrowserProtocol&&"application/vnd.laszip+copc"===this.asset.type}get uri(){let t=new(p())("https://viewer.copc.io");return t.addQuery("copc",this.component.href),t}get text(){return f.Ay.t("actions.openIn",{service:"copc.io"})}}class m extends u{get show(){return this.component.isBrowserProtocol&&l.oV==this.asset.type}get uri(){let t=new(p())("https://geojson.io");return t.addQuery("data",`text/x-url,${this.component.href}`),t}get text(){return f.Ay.t("actions.openIn",{service:"geojson.io"})}}var b={CopcViewer:y,GeoJsonIo:m},w={},g={name:"HrefActions",components:{BIconBoxArrowUpRight:i.hNP,BIconDownload:i.AXN,BIconEye:i.bL_,CopyButton:()=>Promise.resolve().then(s.bind(s,22356)),Description:n["default"],Metadata:()=>Promise.all([s.e(537),s.e(4870),s.e(5428)]).then(s.bind(s,75428))},props:{data:{type:Object,required:!0},isAsset:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},size:{type:String,default:"md"},shown:{type:Boolean,default:!1}},computed:{...(0,c.L8)(["getRequestUrl"]),actions(){return Object.entries(this.isAsset?b:w).map((([t,e])=>new e(this.data,this,t))).filter((t=>t.show))},canShow(){return"string"===typeof this.data.type&&(!("server"!==this.tileRendererType||!l.df.includes(this.data.type))||(!this.isGdalVfs||"client"!==this.tileRendererType)&&(!!this.isBrowserProtocol&&!!l.C8.includes(this.data.type)))},protocol(){if("string"===typeof this.href&&this.href){let t=this.href.match(/^(\w+):\/\//);if(t)return t[1].toLowerCase()}return null},isBrowserProtocol(){return!this.protocol&&!this.isGdalVfs||l.I5.includes(this.protocol)},isThumbnail(){return this.isAsset?Array.isArray(this.data.roles)&&this.data.roles.includes("thumbnail")&&!this.data.roles.includes("overview"):"preview"===this.data.rel&&l.Ay.canBrowserDisplayImage(this.data)},isGdalVfs(){return l.Ay.isGdalVfsUri(this.href)},href(){if("string"!==typeof this.data.href)return null;let t=null;return this.context instanceof o.A&&(t=this.context.getAbsoluteUrl()),this.getRequestUrl(this.data.href,t)},from(){if(this.isGdalVfs){let t=this.href.match(/^\/vsi([a-z\d]+)(_streaming)?\//);return this.protocolName(t,this.href)}return this.protocolName(this.protocol,this.href)},browserCanOpenFile(){if(this.isGdalVfs)return!1;if(l.Ay.canBrowserDisplayImage(this.data))return!0;if("string"===typeof this.data.type)switch(this.data.type.toLowerCase()){case"text/html":case"application/xhtml+xml":case"text/plain":case"application/pdf":return!0}return!1},buttonText(){if(this.browserCanOpenFile&&this.isBrowserProtocol)return this.$t("open");let t=!this.isBrowserProtocol&&this.from?"withSource":"generic";return this.$t(`assets.download.${t}`,{source:this.from})},copyButtonText(){let t=this.isGdalVfs?"copyGdalVfsUrl":"copyUrl",e=!this.isBrowserProtocol&&this.from?"withSource":"generic";return this.$t(`assets.${t}.${e}`,{source:this.from})}},methods:{protocolName(t,e=null){if("string"!==typeof t)return"";switch(t.toLowerCase()){case"s3":if(e)try{const t=new(p())(e),s=`protocol.s3.${t.domain()}`;if(this.$te(s))return this.$t(s)}catch(s){}return this.$t("protocol.s3.default");case"abfs":case"abfss":return this.$t("protocol.azure");case"gcs":return this.$t("protocol.gcs");case"ftp":return this.$t("protocol.ftp");case"oss":return this.$t("protocol.oss");case"file":return this.$t("protocol.file")}return""},show(){let t=Object.assign({},this.data);this.isGdalVfs||(t.href=this.href),this.$emit("show",t,this.id,this.isThumbnail)}}},v=g,x=s(81656),_=(0,x.A)(v,r,a,!1,null,null,null),A=_.exports}}]);
//# sourceMappingURL=449.13b4746d.js.map